<!DOCTYPE html>
<html lang="pt" 
		xmlns:th="http://www.thymeleaf.org"  
		xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="layout/layout">
<head>
        <title>ADM-OSCAR-KAMALEON</title>
</head>
<body>
	<!-- Any content you put in the div fragment below will appear on the page-->
	<div class="container" layout:fragment="content">
	
			<h3>
				Listar Clientes com mais de 1 Cartão no Cards
			</h3>            
			
            <fieldset>
                <div class="form-actions">
               
                <label for="nome">Nome Titular:</label>
                <input type="text" id="nome" name="nome"/> 
                       
                <label for="cpfcnpj">CPF:</label>
                <input type="text" id="cpfcnpj" name="cpfcnpj"/>  
                      
                <label for="numeroCartao">N. Cart&atilde;o:</label>
                <input type="text" id="numeroCartao" name="numeroCartao"/>  
                      
                <label for="statusCliente">Status cliente:</label>
                <select id="statusCliente" name="statusCliente">
                	<option value="">-</option>
                	<option value="A">Ativo</option>
                	<option value="B">Bloqueado</option>
                	<option value="C">Cancelado</option>
                </select>   
                      
                <label for="statusCartao">Status cart&atilde;o Titular:</label>
                <select id="statusCartao" name="statusCartao">
                	<option value="">-</option>
                	<option value="V">Ativo</option>
                	<option value="I">Cancelado</option>
                	<option value="E">E</option>
                </select>   

                <label for="nomeDependente">Nome Dependente:</label>
                <input type="text" id="nomeDependente" name="nomeDependente"/> 
                       
                <label for="numeroCartaoDependente">N. Cart&atilde;o Dependente:</label>
                <input type="text" id="numeroCartaoDependente" name="numeroCartaoDependente"/>  
                      
                <label for="statusCartaoDependente">Status cart&atilde;o Dependente:</label>
                <select id="statusCartaoDependente" name="statusCartaoDependente">
                	<option value="">-</option>
                	<option value="V">Ativo</option>
                	<option value="I">Cancelado</option>
                	<option value="E">E</option>
                </select>   
                      
                <label for="statusCartaoTitular">Status Titular Dependente:</label>
                <select id="statusCartaoTitular" name="statusCartaoTitular">
                	<option value="">-</option>
                	<option value="V">Ativo</option>
                	<option value="I">Cancelado</option>
                	<option value="E">E</option>
                </select>   
                     
                    <button onClick="javascript:consulta()" class="btn">Filtrar</button>
                    <button onClick="javascript:xls()" class="btn">XLS</button>
                </div>
            </fieldset>	
			<table id="tabela" class="table table-striped table-bordered table-hover">
			  <thead>
			    <tr>
			      <th>ID_CLIENTE</th>
				  <th>NM_CLIENTE</th>
				  <th>NU_CPF</th>
				  <th>FL_STATUS_CLIENTE</th>
				  <th>DS_STATUS_CLIENTE</th>
				  <th>NU_CARTAO</th>
				  <th>TP_CARTAO</th>
				  <th>FL_STATUS_CARTAO</th>
				  <th>DS_STATUS_CARTAO</th>
				  <th>ID_TIPO_BLOQUEIO</th>
				  <th>DS_TIPO_BLOQUEIO</th>
				  <th>ID_TITULAR</th>
				  <th>NM_TITULAR</th>
				  <th>NM_CLIENTE_DEP</th>
				  <th>FL_STATUS_TITULAR_DEP</th>
				  <th>DS_STATUS_TITULAR</th>
				  <th>NU_CARTAO_DEP</th>
				  <th>TP_CARTAO_DEP</th>
				  <th>FL_STATUS_CARTAO_DEP</th>
				  <th>DS_STATUS_CARTAO_DEP</th>
				  <th>ID_TIPO_BLOQUEIO_TITULAR</th>
				  <th>DS_TIPO_BLOQUEIO_TITULAR</th>
			    </tr>
			  </thead>
			  <tbody>
			  </tbody>
			</table>
				            
	
	<script type="text/javascript">
	
		function consulta()
		{
			
			$.ajax({		     
		    	url: "/adm-oscar/clientesComMaisDeUmCartaoNoCards/json",				
		    	data: {nome: $('#nome').val(), 
		    		   cpfcnpj : $('#cpfcnpj').val(), 
		    		   numeroCartao : $('#numeroCartao').val(), 
		    		   statusCliente : $('#statusCliente').val(),
		    		   statusCartao : $('#statusCartao').val(),
		    		   nomeDependente : $('#nomeDependente').val(),
		    		   numeroCartaoDependente : $('#numeroCartaoDependente').val(),
		    		   statusCartaoDependente : $('#statusCartaoDependente').val(),
		    		   statusCartaoTitular : $('#statusCartaoTitular').val()},				
		    	type: 'GET'		    	
			}).success(function(data){
				
				$("#tabela > tbody").empty();
				
				$.each( data, function( key, value ) {

					var conteudo = "<tr>";
					conteudo += "<td>"+value[0]+"</td>";
					conteudo += "<td>"+value[1]+"</td>";
					conteudo += "<td>"+value[2]+"</td>";
					conteudo += "<td>"+value[3]+"</td>";
					conteudo += "<td>"+value[4]+"</td>";
					conteudo += "<td>"+value[5]+"</td>";
					conteudo += "<td>"+value[6]+"</td>";
					conteudo += "<td>"+value[7]+"</td>";
					conteudo += "<td>"+value[8]+"</td>";
					conteudo += "<td>"+value[9]+"</td>";
					conteudo += "<td>"+value[10]+"</td>";
					conteudo += "<td>"+value[11]+"</td>";
					conteudo += "<td>"+value[12]+"</td>";
					conteudo += "<td>"+value[13]+"</td>";
					conteudo += "<td>"+value[14]+"</td>";
					conteudo += "<td>"+value[15]+"</td>";
					conteudo += "<td>"+value[16]+"</td>";
					conteudo += "<td>"+value[17]+"</td>";
					conteudo += "<td>"+value[18]+"</td>";
					conteudo += "<td>"+value[19]+"</td>";
					conteudo += "<td>"+value[20]+"</td>";
					conteudo += "<td>"+value[21]+"</td>";
					conteudo += "</tr>";
					$("#tabela > tbody").append(conteudo);
					});
			})	
		}
		function xls()
		{
			$.ajax({		
				url: "/adm-oscar/clientesComMaisDeUmCartaoNoCards/xls",				
		    	data: {nome: $('#nome').val(), 
		    		   cpfcnpj : $('#cpfcnpj').val(), 
		    		   numeroCartao : $('#numeroCartao').val(), 
		    		   statusCliente : $('#statusCliente').val(),
		    		   statusCartao : $('#statusCartao').val(),
		    		   nomeDependente : $('#nomeDependente').val(),
		    		   numeroCartaoDependente : $('#numeroCartaoDependente').val(),
		    		   statusCartaoDependente : $('#statusCartaoDependente').val(),
		    		   statusCartaoTitular : $('#statusCartaoTitular').val()},				
		    	type: 'GET'		    	
			}).success(function(data){
				
				window.open(data,"XLS","width=800, height=600, directories=no, location=no, menubar=no, scrollbars=no,status=no,toolbar=no, resizable=no");
			})	
		}
		</script>
	
	</div>

</body>
</html>
